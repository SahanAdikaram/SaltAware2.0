{"ast":null,"code":"import _objectSpread from\"D:/SaltAware2.0/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useState,useContext}from'react';import{recommendRecipes}from'../services/api';// Create context\nimport{jsx as _jsx}from\"react/jsx-runtime\";const RecipeContext=/*#__PURE__*/createContext();// Create provider\nexport function RecipeProvider(_ref){let{children}=_ref;const[ingredients,setIngredients]=useState([]);const[healthProfile,setHealthProfile]=useState({dailySodiumMax:1500,birthDate:'',hasDiabetes:false,hasRenalDisease:false});const[recommendations,setRecommendations]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const addIngredient=ingredient=>{if(ingredient&&!ingredients.includes(ingredient.toLowerCase())){setIngredients([...ingredients,ingredient.toLowerCase()]);}};const removeIngredient=ingredient=>{setIngredients(ingredients.filter(ing=>ing!==ingredient));};const updateHealthProfile=newProfile=>{setHealthProfile(_objectSpread(_objectSpread({},healthProfile),newProfile));};const getRecommendations=async()=>{setLoading(true);setError(null);try{const data=await recommendRecipes(ingredients,healthProfile);setRecommendations(data);}catch(error){var _error$response,_error$response$data;console.error('Error fetching recommendations:',error);// Extract error message properly\nconst errorMessage=(error===null||error===void 0?void 0:error.message)||(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to load recommendations. Please try again.';setError(errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(RecipeContext.Provider,{value:{ingredients,healthProfile,recommendations,loading,error,addIngredient,removeIngredient,updateHealthProfile,getRecommendations},children:children});}// Create and export custom hook\nexport const useRecipeContext=()=>{const context=useContext(RecipeContext);if(!context){throw new Error('useRecipeContext must be used within a RecipeProvider');}return context;};","map":{"version":3,"names":["React","createContext","useState","useContext","recommendRecipes","jsx","_jsx","RecipeContext","RecipeProvider","_ref","children","ingredients","setIngredients","healthProfile","setHealthProfile","dailySodiumMax","birthDate","hasDiabetes","hasRenalDisease","recommendations","setRecommendations","loading","setLoading","error","setError","addIngredient","ingredient","includes","toLowerCase","removeIngredient","filter","ing","updateHealthProfile","newProfile","_objectSpread","getRecommendations","data","_error$response","_error$response$data","console","errorMessage","message","response","Provider","value","useRecipeContext","context","Error"],"sources":["D:/SaltAware2.0/client/src/context/RecipeContext.jsx"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\nimport { recommendRecipes } from '../services/api';\n\n// Create context\nconst RecipeContext = createContext();\n\n// Create provider\nexport function RecipeProvider({ children }) {\n  const [ingredients, setIngredients] = useState([]);\n  const [healthProfile, setHealthProfile] = useState({\n    dailySodiumMax: 1500,\n    birthDate: '',\n    hasDiabetes: false,\n    hasRenalDisease: false\n  });\n  const [recommendations, setRecommendations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const addIngredient = (ingredient) => {\n    if (ingredient && !ingredients.includes(ingredient.toLowerCase())) {\n      setIngredients([...ingredients, ingredient.toLowerCase()]);\n    }\n  };\n\n  const removeIngredient = (ingredient) => {\n    setIngredients(ingredients.filter(ing => ing !== ingredient));\n  };\n\n  const updateHealthProfile = (newProfile) => {\n    setHealthProfile({ ...healthProfile, ...newProfile });\n  };\n\n  const getRecommendations = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await recommendRecipes(ingredients, healthProfile);\n      setRecommendations(data);\n    } catch (error) {\n      console.error('Error fetching recommendations:', error);\n      // Extract error message properly\n      const errorMessage = error?.message || error?.response?.data?.error || 'Failed to load recommendations. Please try again.';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <RecipeContext.Provider\n      value={{\n        ingredients,\n        healthProfile,\n        recommendations,\n        loading,\n        error,\n        addIngredient,\n        removeIngredient,\n        updateHealthProfile,\n        getRecommendations\n      }}\n    >\n      {children}\n    </RecipeContext.Provider>\n  );\n}\n\n// Create and export custom hook\nexport const useRecipeContext = () => {\n  const context = useContext(RecipeContext);\n  if (!context) {\n    throw new Error('useRecipeContext must be used within a RecipeProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}